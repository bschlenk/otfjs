import{j as o,r as h,u as v,h as b,a as N,L as E,f as S,b as A,g as F}from"./index-BLcYMuvG.js";import{F as R,a as L}from"./font-view-DO20qeVM.js";function C(e){return o.jsx("svg",{...e,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:o.jsx("path",{stroke:"var(--color-icon)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M11 19a8 8 0 1 0 0-16 8 8 0 0 0 0 16M21 21l-4.35-4.35"})})}const T="_container_4edcx_1",I="_overlay_4edcx_28",M="_input_4edcx_38",q="_icon_4edcx_46",B="_shortcut_4edcx_49",w={container:T,overlay:I,input:M,icon:q,shortcut:B};function D({onChange:e}){return o.jsxs("div",{className:w.container,children:[o.jsx("input",{id:"root.search",className:w.input,placeholder:"Search",onChange:t=>e(t.currentTarget.value)}),o.jsxs("div",{"aria-hidden":"true",className:w.overlay,children:[o.jsx(C,{className:w.icon}),o.jsx(H,{value:"⌘K"})]})]})}function H({value:e}){return o.jsx("kbd",{className:w.shortcut,children:e})}function W(e,t){const r=h.useRef(null),n=h.useRef(null);return h.useEffect(()=>()=>clearTimeout(r.current),[]),i=>{n.current=i,clearTimeout(r.current),r.current=window.setTimeout(()=>{t(n.current)},e)}}function $(e,t){return r=>{const n=P(e.current,t);return n.currentNode=r,n}}function P(e,t){return document.createTreeWalker(e,1,r=>t(r)?1:3)}function K(e,t,r){const n=[];for(const i of Object.entries(e))t(...i)&&n.push(r(...i));return n}const U="_root_t93f8_1",V="_button_t93f8_16",z="_tile_t93f8_37",j={root:U,button:V,tile:z},G=h.memo(function({fonts:t,filter:r}){const n=h.useRef(null),i=Q(n),g=v(),y=a=>{g.preloadRoute({to:"/fonts/$name",params:{name:a.getAttribute("data-name")}})},k=W(400,y),_=h.useMemo(()=>$(n,a=>a.tagName==="A"),[]);return o.jsx("div",{ref:n,role:"grid","aria-label":"Fonts",className:j.root,onKeyDown:a=>{const d=b(a),m=a.target;switch(d.value){case"H":case"⌃P":case"ArrowLeft":return d.accept(()=>{_(m).previousNode()?.focus()});case"L":case"⌃N":case"ArrowRight":return d.accept(()=>{_(m).nextNode()?.focus()});case"K":case"⌃U":case"ArrowUp":return d.accept(()=>{const c=_(m);let s=m;for(let u=0;u<i();++u)s=c.previousNode();s?.focus()});case"J":case"⌃D":case"ArrowDown":return d.accept(()=>{const c=_(m);let s=m;for(let u=0;u<i();++u)s=c.nextNode();s?.focus()});case"PageUp":return d.accept(()=>{let c=0;const s=Array.from(n.current.children),u=m.parentElement,f=i();let l=s.findIndex(p=>p===u);l=l-l%f;let x=s[l];for(;0<=l-f*(c+1)&&(++c,x=s[l-f*c],!(x.getBoundingClientRect().top<0)););x.querySelector("a").focus()});case"PageDown":return d.accept(()=>{let c=0;const s=Array.from(n.current.children),u=m.parentElement,f=i();let l=s.findIndex(p=>p===u);l=l-l%f;let x=s[l];for(;s.length>l+f*(c+1)&&(++c,x=s[l+f*c],!(x.getBoundingClientRect().bottom>window.innerHeight)););x.querySelector("a").focus()});case"Home":return d.accept(()=>{const c=Array.from(n.current.children),s=m.parentElement,u=c.findIndex(l=>l===s),f=i();c[u-u%f].querySelector("a").focus()});case"End":return d.accept(()=>{const c=Array.from(n.current.children),s=m.parentElement,u=c.findIndex(l=>l===s),f=i();c[u-u%f+f-1].querySelector("a").focus()});case"⌃Home":return d.accept(()=>{n.current.firstElementChild.querySelector("a").focus()});case"⌃End":return d.accept(()=>{n.current.lastElementChild.querySelector("a").focus()})}},onPointerDown:a=>{a.target instanceof HTMLAnchorElement&&y(a.target)},onFocus:a=>{a.target instanceof HTMLAnchorElement&&k(a.target)},children:K(t,a=>!r||O(a,r),(a,d)=>o.jsx(J,{name:a},a))})});function J({name:e}){return o.jsx("div",{role:"gridcell",children:o.jsxs(E,{to:"/fonts/$name","data-name":e,params:{name:e},className:j.button,children:[o.jsx("div",{className:j.tile,children:o.jsx(R,{name:e,size:100})}),o.jsx("span",{className:"text-center text-(--color-text-secondary)",children:e})]})})}function O(e,t){return e.toLowerCase().includes(t.toLowerCase())}function Q(e){const t=h.useRef(null);return h.useEffect(()=>N(window,"resize",()=>{t.current=null}),[]),()=>{if(t.current!==null)return t.current;let r=0,n=0;for(const i of e.current.children){const g=i.getBoundingClientRect();if(g.left<r){t.current=n;break}r=g.left,++n}return n}}const X="_root_1wgy5_1",Y={root:X};function Z(){const[e,t]=h.useState(""),r=h.useDeferredValue(e);return o.jsxs("div",{className:Y.root,children:[o.jsx(D,{onChange:t}),o.jsx(G,{fonts:S,filter:r})]})}function ne(){const t=A().location.state.fontId;if(t){const r=F(t);if(r)return o.jsx(L,{font:r})}return o.jsx(Z,{})}export{ne as component};
